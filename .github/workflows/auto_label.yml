name: Auto-Label Issue From Title

on:
  issues:
    types: [opened, edited]

  jobs: 
    auto_label:
      runs-on: ubuntu-latest

        steps:
          - name: Assign label to issue based on issue title.
            run: |
              ISSUE_TITLE="${{ github.event.issue.title }}"
              Labels=()

              case "$ISSUE_TITLE" in 
                *Components*)
                  echo "Adding React and Javascript labels to issue"
                  Labels+=('React', 'Javascript')
                  ;;
                *DevOps* | *Dev Ops*)
                  echo "Adding Dev Ops label to issue"
                  Labels+=('Dev Ops')
                  ;;
                esac

                if [[ -n "$LABEL" ]]; then
                  curl -X POST -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
                  -H "Accept: application/vnd.github.v3+json" \
                  https://api.github.com/repos/${{ github.repository }}/issues/${{ github.event.issue.number }}/labels \
                  -d "{\"labels\":[\"$LABEL\"]}"
                fi
              
